<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: blob: https: wss:; style-src 'self' 'unsafe-inline' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; img-src 'self' data: blob: https:; frame-src 'self' blob:;">
    <title>Conversor</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="fonts/fontawesome/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        :root {
            --bg: #000000;
            --bg-card: rgba(30, 30, 30, 0.5);
            --bg-elevated: rgba(40, 40, 40, 0.6);
            --text-primary: #e6e6e6;
            --text-secondary: #5a5a5a;
            --border: rgba(255, 255, 255, 0.08);
            --accent: #ffffff;
            --green: #34c759;
            --red: #ff3b30;
            --blue: #0a84ff;
            --orange: #ff9500;
            --safe-top: env(safe-area-inset-top, 0px);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
        }
        html, body { width: 100%; height: 100%; overflow-x: hidden; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg); color: var(--text-primary); }
        .app { min-height: 100%; display: flex; flex-direction: column; }
        .header { display: flex; align-items: center; height: 56px; padding: 0 12px; padding-top: var(--safe-top); background: transparent; border-bottom: 1px solid var(--border); gap: 12px; }
        .back-btn { width: 40px; height: 40px; background: none; border: none; color: var(--text-primary); font-size: 18px; display: flex; align-items: center; justify-content: center; cursor: pointer; border-radius: 10px; }
        .back-btn:active { background: var(--bg-card); }
        .header h1 { font-size: 17px; font-weight: 600; }
        .content { flex: 1; padding: 16px; padding-bottom: calc(20px + var(--safe-bottom)); overflow-y: auto; }
        .drop-zone { border: 1px dashed var(--border); border-radius: 16px; padding: 32px 20px; text-align: center; background: var(--bg-card); transition: all 0.2s; cursor: pointer; margin-bottom: 20px; }
        .drop-zone:active, .drop-zone.dragover { border-color: var(--text-secondary); background: var(--bg-elevated); }
        .drop-zone-icon { width: 64px; height: 64px; margin: 0 auto 14px; background: var(--bg-elevated); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 28px; color: var(--text-primary); }
        .drop-zone h2 { font-size: 16px; font-weight: 600; margin-bottom: 6px; }
        .drop-zone p { color: var(--text-secondary); font-size: 13px; }
        .file-info { display: none; background: var(--bg-card); border: 1px solid var(--border); border-radius: 14px; padding: 14px; margin-bottom: 20px; }
        .file-info.visible { display: block; }
        .file-row { display: flex; align-items: center; gap: 12px; }
        .file-icon { width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
        .file-icon.pdf { background: rgba(255, 59, 48, 0.15); color: #ff3b30; }
        .file-icon.doc { background: rgba(10, 132, 255, 0.15); color: #0a84ff; }
        .file-icon.ppt { background: rgba(255, 149, 0, 0.15); color: #ff9500; }
        .file-icon.xls { background: rgba(52, 199, 89, 0.15); color: #34c759; }
        .file-icon.img { background: rgba(175, 82, 222, 0.15); color: #af52de; }
        .file-icon.audio { background: rgba(255, 45, 85, 0.15); color: #ff2d55; }
        .file-icon.other { background: var(--bg-elevated); color: var(--text-secondary); }
        .file-details { flex: 1; min-width: 0; }
        .file-name { font-size: 14px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .file-size { font-size: 12px; color: var(--text-secondary); margin-top: 2px; }
        .file-remove { width: 36px; height: 36px; background: rgba(255, 59, 48, 0.1); border: none; border-radius: 10px; color: var(--red); font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .section-title { font-size: 12px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px; font-weight: 600; }
        .category-tabs { display: flex; gap: 6px; margin-bottom: 14px; overflow-x: auto; padding-bottom: 2px; }
        .category-tab { padding: 8px 14px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text-secondary); font-size: 12px; font-weight: 600; cursor: pointer; white-space: nowrap; transition: all 0.2s; }
        .category-tab.active { background: var(--text-primary); color: var(--bg); border-color: var(--text-primary); }
        .category-tabs::-webkit-scrollbar { display: none; }
        .format-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 20px; }
        .format-btn { height: 44px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 10px; color: var(--text-primary); font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; justify-content: center; gap: 4px; }
        .format-btn:active { transform: scale(0.96); }
        .format-btn.selected { border-color: var(--text-primary); background: rgba(255, 255, 255, 0.1); }
        .format-btn.disabled { opacity: 0.3; pointer-events: none; }
        .format-btn i { font-size: 14px; }
        .convert-btn { width: 100%; height: 50px; background: var(--text-primary); border: none; border-radius: 12px; color: var(--bg); font-size: 15px; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s; }
        .convert-btn:active { transform: scale(0.98); opacity: 0.9; }
        .convert-btn:disabled { opacity: 0.3; pointer-events: none; }
        .loading { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; flex-direction: column; align-items: center; justify-content: center; }
        .loading.show { display: flex; }
        .spinner { width: 40px; height: 40px; border: 2px solid rgba(255,255,255,0.1); border-top-color: var(--text-primary); border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loading p { margin-top: 14px; color: var(--text-secondary); font-size: 14px; }
        .toast { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); padding: 12px 20px; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 10px; color: var(--text-primary); font-size: 13px; opacity: 0; transition: opacity 0.3s; z-index: 1001; pointer-events: none; max-width: 90%; text-align: center; }
        .toast.show { opacity: 1; }
        .success-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1002; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .success-modal.show { display: flex; }
        .success-icon { width: 80px; height: 80px; background: rgba(52, 199, 89, 0.15); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 36px; color: var(--green); margin-bottom: 20px; }
        .success-modal h2 { font-size: 20px; font-weight: 700; margin-bottom: 8px; text-align: center; }
        .success-modal p { color: var(--text-secondary); font-size: 14px; margin-bottom: 24px; text-align: center; word-break: break-all; }
        .success-buttons { display: flex; flex-direction: column; gap: 10px; width: 100%; max-width: 300px; }
        .open-btn { width: 100%; height: 50px; background: var(--green); border: none; border-radius: 12px; color: #fff; font-size: 15px; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .open-btn:active { opacity: 0.9; }
        .close-modal-btn { width: 100%; height: 50px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; color: var(--text-primary); font-size: 15px; font-weight: 600; cursor: pointer; }
        .formats-info { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 14px; margin-top: 16px; }
        .formats-info h3 { font-size: 13px; font-weight: 600; margin-bottom: 10px; color: var(--text-secondary); }
        .format-tags { display: flex; flex-wrap: wrap; gap: 6px; }
        .format-tag { padding: 4px 10px; background: var(--bg-elevated); border-radius: 6px; font-size: 11px; font-weight: 600; color: var(--text-secondary); }
    </style>
</head>
<body>
    <div class="app">
        <header class="header">
            <button class="back-btn" id="backBtn"><i class="fas fa-chevron-left"></i></button>
            <h1>Converter Arquivo</h1>
        </header>
        <div class="content">
            <div class="drop-zone" id="dropZone">
                <div class="drop-zone-icon"><i class="fas fa-arrow-up-from-bracket"></i></div>
                <h2>Selecionar arquivo</h2>
                <p>Toque para escolher um arquivo</p>
            </div>
            <div class="file-info" id="fileInfo">
                <div class="file-row">
                    <div class="file-icon" id="fileIcon"><i class="fas fa-file"></i></div>
                    <div class="file-details">
                        <div class="file-name" id="fileName">arquivo.pdf</div>
                        <div class="file-size" id="fileSize">2.5 MB</div>
                    </div>
                    <button class="file-remove" id="fileRemove"><i class="fas fa-xmark"></i></button>
                </div>
            </div>
            <p class="section-title">Categoria</p>
            <div class="category-tabs" id="categoryTabs">
                <button class="category-tab active" data-cat="all">Todos</button>
                <button class="category-tab" data-cat="doc">Documentos</button>
                <button class="category-tab" data-cat="office">Office</button>
                <button class="category-tab" data-cat="img">Imagens</button>
                <button class="category-tab" data-cat="data">Dados</button>
            </div>
            <p class="section-title">Converter para</p>
            <div class="format-grid" id="formatGrid">
                <button class="format-btn" data-format="pdf" data-cat="doc">PDF</button>
                <button class="format-btn" data-format="txt" data-cat="doc">TXT</button>
                <button class="format-btn" data-format="html" data-cat="doc">HTML</button>
                <button class="format-btn" data-format="md" data-cat="doc">MD</button>
                <button class="format-btn" data-format="docx" data-cat="office">DOCX</button>
                <button class="format-btn" data-format="pptx" data-cat="office">PPTX</button>
                <button class="format-btn" data-format="xlsx" data-cat="office">XLSX</button>
                <button class="format-btn" data-format="png" data-cat="img">PNG</button>
                <button class="format-btn" data-format="jpg" data-cat="img">JPG</button>
                <button class="format-btn" data-format="webp" data-cat="img">WEBP</button>
                <button class="format-btn" data-format="gif" data-cat="img">GIF</button>
                <button class="format-btn" data-format="bmp" data-cat="img">BMP</button>
                <button class="format-btn" data-format="ico" data-cat="img">ICO</button>

                <button class="format-btn" data-format="json" data-cat="data">JSON</button>
                <button class="format-btn" data-format="csv" data-cat="data">CSV</button>
                <button class="format-btn" data-format="xml" data-cat="data">XML</button>
                <button class="format-btn" data-format="yaml" data-cat="data">YAML</button>
                <button class="format-btn" data-format="tsv" data-cat="data">TSV</button>
            </div>
            <button class="convert-btn" id="convertBtn" disabled><i class="fas fa-repeat"></i> Converter</button>
            <div class="formats-info">
                <h3>Formatos suportados</h3>
                <div class="format-tags">
                    <span class="format-tag">PDF</span>
                    <span class="format-tag">DOCX</span>
                    <span class="format-tag">PPTX</span>
                    <span class="format-tag">XLSX</span>
                    <span class="format-tag">PNG</span>
                    <span class="format-tag">JPG</span>
                    <span class="format-tag">WEBP</span>
                    <span class="format-tag">JSON</span>
                    <span class="format-tag">CSV</span>
                    <span class="format-tag">XML</span>
                    <span class="format-tag">YAML</span>
                    <span class="format-tag">TSV</span>
                    <span class="format-tag">TXT</span>
                    <span class="format-tag">MD</span>
                    <span class="format-tag">HTML</span>
                </div>
            </div>
        </div>
    </div>
    <div class="loading" id="loading"><div class="spinner"></div><p id="loadingText">Convertendo...</p></div>
    <div class="success-modal" id="successModal">
        <div class="success-icon"><i class="fas fa-check"></i></div>
        <h2>Convertido!</h2>
        <p id="savedPath">Arquivo salvo</p>
        <div class="success-buttons">
            <button class="open-btn" id="openFileBtn"><i class="fas fa-folder-open"></i> Abrir Arquivo</button>
            <button class="close-modal-btn" id="closeModalBtn">Fechar</button>
        </div>
    </div>
    <div class="toast" id="toast"></div>
    <input type="file" id="fileInput" hidden accept="*/*">
    <script src="cordova.js"></script>
    <script src="js/converter-logic.js"></script>
</body>
</html>
